/*! soma-interact - v0.0.1 - Romuald Quantin - 2012-11-29
* http://soundstep.github.com/soma-interact/
* MIT licence 2012 */
(function(e,t){"use strict";function c(e){return e?e.nodeType>0:!1}function h(e){return e&&typeof e=="function"}function p(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{n.$$guid||(n.$$guid=p.guid++),e.events||(e.events={});var r=e.events[t];r||(r=e.events[t]={},e["on"+t]&&(r[0]=e["on"+t])),r[n.$$guid]=n,e["on"+t]=v}}function d(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.events&&e.events[t]&&delete e.events[t][n.$$guid]}function v(e){var t=!0;e=e||m(((this.ownerDocument||this.document||this).parentWindow||window).event);var n=this.events[e.type];for(var r in n)this.$$handleEvent=n[r],this.$$handleEvent(e)===!1&&(t=!1);return t}function m(e){return e.preventDefault=m.preventDefault,e.stopPropagation=m.stopPropagation,e}function y(e,t,n){var r=t.match(/(.*)\((.*)\)/);if(r){var i=r[1];if(h(e[i]))return e[i]}}function b(e,n,i){r=i===t?Number.MAX_VALUE:i,w(e,n,0)}function w(e,t,n){if(!c(e))throw new Error("Error in soma.interact.parse, only a DOM Element can be parsed.");E(e,t);var i=e.firstChild;while(i)i.nodeType===1&&(n<r&&w(i,t,n++),E(i,t)),i=i.nextSibling}function E(e,t){var n=[];for(var r,i,o,u=e.attributes,a=0,f=u&&u.length;a<f;a++){r=u[a];if(r.specified){i=r.name,o=r.value;if(s.attributes[i]){var l=y(t,o,e);l&&(p(e,s.attributes[i],l),x(e,s.attributes[i],l))}}}}function S(e){var t=i.length,n=0;while(--t>=n){var r=i[t];if(e===r.element||g(e,r.element))d(r.element,r.type,r.handler),i.splice(t,1)}}function x(e,t,n){i.push({element:e,type:t,handler:n})}function N(e,t){}e.interact=e.interact||{},e.interact.version="0.0.1";var n=e.interact.errors={},r,i=[],s=e.interact.settings=e.interact.settings||{},o=s.attributes={};s.prefix="data";var u="click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup focus blur change select selectstart scroll copy cut paste mousewheel keypress error",a=u.split(" "),f=-1,l=a.length;while(++f<l)o[s.prefix+"-"+a[f]]=a[f];p.guid=1,m.preventDefault=function(){this.returnValue=!1},m.stopPropagation=function(){this.cancelBubble=!0};var g=document.documentElement.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:document.documentElement.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},T=function(e,t){return t=document,e?function(e){var n=t.firstChild,r=function(){try{e(n.doScroll("left"))}catch(t){setTimeout(r,10)}};r()}:/webkit|safari|khtml/i.test(navigator.userAgent)?function(e){var n=function(){/loaded|complete/.test(t.readyState)?e():setTimeout(n,10)};n()}:function(e){t.addEventListener("DOMContentLoaded",e,!1)}}();T(function(){}),e.plugins=e.plugins||{},e.plugins&&e.plugins.add&&e.plugins.add(N),e.interact.parse=b,e.interact.clear=S,e.interact.addEvent=p,e.interact.removeEvent=d,typeof define=="function"&&define.amd&&define("soma-interact",e.interact),typeof exports!="undefined"&&(typeof module!="undefined"&&module.exports&&(exports=module.exports=e.interact),exports=e.interact)})(this.soma=this.soma||{});