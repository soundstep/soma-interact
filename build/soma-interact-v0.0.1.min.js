/*! soma-interact - v0.0.1 - Romuald Quantin - 2012-11-27
* http://soundstep.github.com/soma-interact/
* MIT licence 2012 */
(function(e,t){"use strict";function s(e){return e?e.nodeType>0:!1}function o(e){return e&&typeof e=="function"}function u(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{n.$$guid||(n.$$guid=u.guid++),e.events||(e.events={});var r=e.events[t];r||(r=e.events[t]={},e["on"+t]&&(r[0]=e["on"+t])),r[n.$$guid]=n,e["on"+t]=f}}function a(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.events&&e.events[t]&&delete e.events[t][n.$$guid]}function f(e){var t=!0;e=e||l(((this.ownerDocument||this.document||this).parentWindow||window).event);var n=this.events[e.type];for(var r in n)this.$$handleEvent=n[r],this.$$handleEvent(e)===!1&&(t=!1);return t}function l(e){return e.preventDefault=l.preventDefault,e.stopPropagation=l.stopPropagation,e}function c(e,n,r,i,s){if(/^(\"|\')(.*)(\"|\')$/.test(n))return trimQuotes(n);var u=[];if(!s&&i){var a=-1,f=i.length;while(++a<f)u.push(getValueFromPattern(e,i[a]))}else u=s;var l=getScopeFromPattern(e,n);n=n.replace(/..\//g,""),r=r.replace(/..\//g,"");if(!l)return t;var h=l,p=r.split(/\.|\[|\]/g);if(p.length>0){var d=-1,v=p.length;while(++d<v){p[d]!==""&&(h=h[p[d]]);if(!isDefined(h))return l._parent?c(l._parent,n,r,i,u):t}}return o(h)?h.apply(null,u):h}function h(e,t,n){var r=t.match(/(.*)\((.*)\)/);if(r){var i=r[1];if(o(e[i]))return e[i]}}function p(e,t){if(!s(e))throw new Error("Error in soma.interact.parse, only a DOM Element can be parsed.");var n=e.firstChild;console.log("CHILD",n);while(n){if(n.nodeType===1){console.log(n,n.childNodes),p(n);var i=[];for(var o,a,f,l=n.attributes,c=0,d=l&&l.length;c<d;c++){o=l[c];if(o.specified){a=o.name,f=o.value;if(a===r.attributes.click){console.log("found",n);var v=h(t,o.value,n);v&&(console.log("handler",v),u(n,"click",v))}}}}n=n.nextSibling}}function v(e,t){}e.interact=e.interact||{},e.interact.version="0.0.1";var n=e.interact.errors={},r=e.interact.settings=e.interact.settings||{},i=r.attributes={click:"data-click"};u.guid=1,l.preventDefault=function(){this.returnValue=!1},l.stopPropagation=function(){this.cancelBubble=!0};var d=function(e,t){return t=document,e?function(e){var n=t.firstChild,r=function(){try{e(n.doScroll("left"))}catch(t){setTimeout(r,10)}};r()}:/webkit|safari|khtml/i.test(navigator.userAgent)?function(e){var n=function(){/loaded|complete/.test(t.readyState)?e():setTimeout(n,10)};n()}:function(e){t.addEventListener("DOMContentLoaded",e,!1)}}();d(function(){}),e.plugins=e.plugins||{},e.plugins&&e.plugins.add&&e.plugins.add(v),e.interact.parse=p,e.interact.addEvent=u,e.interact.removeEvent=a,typeof define=="function"&&define.amd&&define("soma-interact",e.interact),typeof exports!="undefined"&&(typeof module!="undefined"&&module.exports&&(exports=module.exports=e.interact),exports=e.interact)})(this.soma=this.soma||{});